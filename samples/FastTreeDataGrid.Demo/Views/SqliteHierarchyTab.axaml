<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="clr-namespace:FastTreeDataGrid.Demo.ViewModels"
             xmlns:crud="clr-namespace:FastTreeDataGrid.Demo.ViewModels.Crud"
             xmlns:controls="clr-namespace:FastTreeDataGrid.Control.Controls;assembly=FastTreeDataGrid.Control"
             mc:Ignorable="d"
             x:Class="FastTreeDataGrid.Demo.Views.SqliteHierarchyTab"
             x:DataType="vm:MainWindowViewModel">
  <Grid RowDefinitions="Auto,*"
        RowSpacing="12">
    <Border Grid.Row="0"
            Padding="12"
            Background="#F8F9FF"
            BorderBrush="#CED3EA"
            BorderThickness="1"
            CornerRadius="6">
      <StackPanel Spacing="8"
                  DataContext="{Binding SqliteHierarchy}">
        <TextBlock Text="SQLite-backed CRUD with category â†’ product hierarchy."
                   FontWeight="SemiBold" />
        <StackPanel Orientation="Horizontal"
                    Spacing="6"
                    VerticalAlignment="Center">
          <TextBlock Text="New category:"
                     VerticalAlignment="Center" />
          <TextBox Width="200"
                   Watermark="Category name"
                   Text="{Binding AddCategoryName, UpdateSourceTrigger=PropertyChanged}" />
          <Button Content="Add"
                  Command="{Binding AddCategoryCommand}" />
          <Button Content="Refresh"
                  Command="{Binding RefreshCommand}" />
        </StackPanel>
        <StackPanel Orientation="Horizontal"
                    Spacing="6"
                    VerticalAlignment="Center">
          <TextBlock Text="New product:"
                     VerticalAlignment="Center" />
          <TextBox Width="200"
                   Watermark="Product name"
                   Text="{Binding AddProductName, UpdateSourceTrigger=PropertyChanged}" />
          <TextBox Width="100"
                   Watermark="Price"
                   Text="{Binding AddProductPriceText, UpdateSourceTrigger=PropertyChanged}" />
          <Button Content="Add to selection"
                  Command="{Binding AddProductCommand}" />
        </StackPanel>
        <Border Padding="8"
                Background="#FFFFFF"
                BorderBrush="#E2E6F2"
                BorderThickness="1"
                CornerRadius="4">
          <StackPanel Spacing="6">
            <TextBlock Text="{Binding SelectedSummary}" />
            <StackPanel Orientation="Horizontal"
                        Spacing="6">
              <TextBox Width="200"
                       Watermark="Name"
                       Text="{Binding EditName, UpdateSourceTrigger=PropertyChanged}" />
              <TextBox Width="100"
                       Watermark="Price"
                       IsEnabled="{Binding IsProductSelected}"
                       Text="{Binding EditPriceText, UpdateSourceTrigger=PropertyChanged}" />
              <Button Content="Save changes"
                      Command="{Binding SaveCommand}" />
              <Button Content="Delete"
                      Command="{Binding DeleteCommand}" />
            </StackPanel>
          </StackPanel>
        </Border>
        <TextBlock Text="{Binding Status}"
                   Foreground="#465A9C" />
      </StackPanel>
    </Border>
    <Border Grid.Row="1"
            BorderBrush="#C7CBDD"
            BorderThickness="1"
            CornerRadius="6"
            Padding="0">
      <controls:FastTreeDataGrid ItemsSource="{Binding SqliteHierarchy.Source}"
                                 SelectedIndices="{Binding SqliteHierarchy.SelectedIndices, Mode=TwoWay}"
                                 RowHeight="30"
                                 IndentWidth="20"
                                 HeaderHeight="34"
                                 IsFilterRowVisible="True">
        <controls:FastTreeDataGrid.Columns>
          <FastTreeDataGridColumn Header="Name"
                                  ValueKey="{x:Static crud:SqliteCrudNode.KeyName}"
                                  SizingMode="Star"
                                  IsHierarchy="True"
                                  CanUserSort="False" />
          <FastTreeDataGridColumn Header="Type"
                                  ValueKey="{x:Static crud:SqliteCrudNode.KeyType}"
                                  SizingMode="Pixel"
                                  PixelWidth="140"
                                  CanUserSort="False" />
          <FastTreeDataGridColumn Header="Price"
                                  ValueKey="{x:Static crud:SqliteCrudNode.KeyPrice}"
                                  SizingMode="Pixel"
                                  PixelWidth="140"
                                  CanUserSort="False" />
          <FastTreeDataGridColumn Header="Id"
                                  ValueKey="{x:Static crud:SqliteCrudNode.KeyId}"
                                  SizingMode="Pixel"
                                  PixelWidth="80"
                                  CanUserSort="False" />
        </controls:FastTreeDataGrid.Columns>
      </controls:FastTreeDataGrid>
    </Border>
  </Grid>
</UserControl>
